# Алгоритм Диница

## Описание

**Алгоритм Диница** (1970) решает задачу максимального потока в сети и применяется здесь для оптимизации долгов: граф долгов преобразуется в сеть с искусственным источником и стоком, ограничениями на рёбрах и разбиением вершин (node splitting) для учёта ограничения «никто не платит в сумме больше, чем до упрощения».

Основные шаги:

1. **Построение сети:** участники с отрицательным балансом соединяются с источником, с положительным — со стоком; разрешённые долговые связи задают рёбра с пропускной способностью; для ограничения суммарного исходящего потока по участнику используется разбиение вершины (входная и выходная половинки с ребром ограниченной пропускной способности).
2. **Фазы Диница:** пока из источника достижим сток в остаточной сети, строится **слоистая сеть** (BFS по остаточным рёбрам), затем по ней многократно ищутся **блокирующие потоки** (DFS с текущими указателями).
3. По найденному максимальному потоку восстанавливаются переводы только по рёбрам, соответствующим разрешённым связям между участниками.

## Сложность

- **Время:** O(V² · E), где V — число участников (вершин в исходной постановке; в построенной сети вершин порядка 2V+2), E — число долговых связей.
- **Память:** O(V + E) для хранения списков смежности и служебных массивов.

Алгоритм полиномиален и на практике часто работает быстрее оценки; хорошо подходит для плотных графов.
